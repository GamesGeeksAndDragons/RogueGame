using Assets.Level;
using AssetsTests.Helpers;

namespace AssetsTests.DispatcherTests
{
    static class LevelBuilderExpectations
    {
        private class Level1Expectations : MazeExpectations
        {
            public Level1Expectations()
            {
                Level = 1;
                ExpectedMaze = @"
  |012345678901234567890123456789|  
------------------------------------
0 |██████████████████████████████|0 
1 |██████████████████████████████|1 
2 |██████████████████████████████|2 
3 |██████████████████████████████|3 
4 |██████████████████████████████|4 
5 |██████████████████████████████|5 
6 |██████████████████████████████|6 
7 |██████████████████████████████|7 
8 |██████████████████████████████|8 
9 |██████████████████████████████|9 
10|██████████████████████████████|10
11|██████████████████████████████|11
12|██████████████████████████████|12
13|██████████████████████████████|13
14|██████████████████████████████|14
15|██████████████████████████████|15
16|███████╔════════╗█████████████|16
17|███████║¹¹¹¹¹¹¹¹║█████████████|17
18|███████║¹¹M¹¹¹¹¹║█████████████|18
19|███████║¹¹¹¹¹¹¹¹║█████████████|19
20|███████║¹¹¹¹¹¹¹¹║█████████████|20
21|███████║¹¹¹¹¹¹¹¹║█████████████|21
22|███████║¹¹¹¹¹¹¹¹║█████████████|22
23|███████║¹¹¹¹¹¹¹¹║█████████████|23
24|███████║¹¹¹¹¹¹¹@║█████████████|24
25|███████╚════════╝█████████████|25
26|██████████████████████████████|26
27|██████████████████████████████|27
28|██████████████████████████████|28
29|██████████████████████████████|29
------------------------------------
  |012345678901234567890123456789|  
";

            }
        }

        private class Level2Expectation : MazeExpectations
        {
            public Level2Expectation()
            {
                Level = 2;
                ExpectedMaze = @"
  |012345678901234567890123456789012345|  
------------------------------------------
0 |████████████████████████████████████|0 
1 |████████████⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰|1 
2 |████████████⁰██████████████████████⁰|2 
3 |████████████⁰██████████████████████⁰|3 
4 |████████████⁰██████████████████████⁰|4 
5 |████████████⁰██████████████████████⁰|5 
6 |████████████⁰██████████████████████⁰|6 
7 |██████⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰█████⁰|7 
8 |██████⁰█████⁰████████████████⁰█████⁰|8 
9 |██████⁰█████⁰███████████╔════1═══╗█⁰|9 
10|██████⁰█████⁰███████████║¹¹¹¹¹@¹¹║█⁰|10
11|██████⁰█████⁰███████████║¹¹¹¹¹¹¹¹║█⁰|11
12|██████⁰█████⁰███████████║¹¹¹¹¹¹¹¹║█⁰|12
13|██████⁰╔════2═══╗███████║¹¹¹¹¹¹¹¹║█⁰|13
14|██████⁰║²M²²²²²²║███████║¹¹¹¹¹¹¹¹║█⁰|14
15|██████⁰1²²²²²²M²║███████║¹¹¹¹¹¹¹¹║█⁰|15
16|███████║²²²²²²²²║███████║¹¹¹¹¹¹¹¹║█⁰|16
17|███████║²²²²²²²²║███████║¹¹¹¹¹M¹¹2⁰⁰|17
18|███████║²²²²²²²²║███████╚════════╝██|18
19|███████║²²²²²²²²║███████████████████|19
20|███████║²²²²²²²²║███████████████████|20
21|███████║²²²²²²²²║███████████████████|21
22|███████╚════════╝███████████████████|22
23|████████████████████████████████████|23
24|████████████████████████████████████|24
25|████████████████████████████████████|25
26|████████████████████████████████████|26
27|████████████████████████████████████|27
28|████████████████████████████████████|28
29|████████████████████████████████████|29
30|████████████████████████████████████|30
31|████████████████████████████████████|31
32|████████████████████████████████████|32
33|████████████████████████████████████|33
34|████████████████████████████████████|34
35|████████████████████████████████████|35
------------------------------------------
  |012345678901234567890123456789012345|  
";
            }
        }

        private class Level3Expectations : MazeExpectations
        {
            public Level3Expectations()
            {
                Level = 3;
                ExpectedMaze = @"
  |012345678901234567890123456789012345678901234567890123456789012345678901234567890123|  
------------------------------------------------------------------------------------------
0 |████████████████████████████████████████████████████████████████████████████████████|0 
1 |██████████⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰████|1 
2 |██████████⁰██⁰█████████████████████████████████████████████████████████████⁰███⁰████|2 
3 |█████╔════1══3╗████████████████████████████████████████████████████████████⁰███⁰████|3 
4 |█████║¹¹¹¹¹¹¹¹║████████████████████████████████████████████████████████████⁰███⁰████|4 
5 |█████║¹¹¹¹¹¹¹¹║████████████████████████████████████████████████████████████⁰███⁰████|5 
6 |█████║¹¹¹¹¹¹¹¹║████████████████████████████████████████████████████████████⁰███⁰████|6 
7 |█████║¹¹¹¹¹¹¹¹║████████████████████████████████████████████████████████████⁰███⁰████|7 
8 |█████║¹¹¹¹¹¹¹¹║████████████████████████████████████████████████████████████⁰███⁰████|8 
9 |█████║¹¹¹¹¹¹¹¹║████████████████████████████████████████████████████████████⁰███⁰████|9 
10|█████║¹¹¹¹¹¹¹¹║██⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰███████████████████████████████████████████████⁰███⁰████|10
11|█████║¹¹¹¹¹¹¹¹║██⁰█████████⁰███████████████████████████████████████████████⁰███⁰████|11
12|█████╚════════╝██⁰█████████⁰███████████████████████████████████████████████⁰███⁰████|12
13|█████████████████⁰██╔══════2══╗████████████████████████████████████████████⁰███⁰████|13
14|█████████████████⁰██║³³³³³³³³³║████████████████████████████████████████████⁰███⁰████|14
15|█████████████████⁰██║³³³³³³³³³║████████████████████████████████████████████⁰███⁰████|15
16|█████████████████⁰██║³³³³³³³³³║████████████████████████████████████████████⁰███⁰████|16
17|█████████████████⁰██║³³╔═³═╗³³║████████████████████████████████████████████⁰███⁰████|17
18|█████████████████⁰██║³³║³³³║³³1⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰████|18
19|█████████████████⁰██║³³║³³³║³³║████████████████████████████████████████████⁰████████|19
20|█████████████████⁰██║³³╚═══╝³³║████████████████████████████████████████████⁰████████|20
21|█████████████████⁰██║³³³³³³³³³║████████████████████████████████████████████⁰████████|21
22|█████████████████⁰██║³³³³³³³³³║████████████████████████████████████████████⁰████████|22
23|█████████████████⁰██║³³M³³³³³³║████████████████████████████████████████████⁰████████|23
24|█████████████████⁰██╚════════3╝████████████████████████████████████████████⁰████████|24
25|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|25
26|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|26
27|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|27
28|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|28
29|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|29
30|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|30
31|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|31
32|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|32
33|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|33
34|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|34
35|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|35
36|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|36
37|█████████████████⁰███████████⁰█████████████████████████████████████████████⁰████████|37
38|█████████████████⁰███████████⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰████████|38
39|█████████████████⁰██████████████████████████████████████████████████████████████████|39
40|█████████████████⁰██████████████████████████████████████████████████████████████████|40
41|█████████████████⁰██████████████████████████████████████████████████████████████████|41
42|█████████████████⁰██████████████████████████████████████████████████████████████████|42
43|█████████████████⁰██████████████████████████████████████████████████████████████████|43
44|█████████████████⁰██████████████████████████████████████████████████████████████████|44
45|█████████████████⁰██████████████████████████████████████████████████████████████████|45
46|█████████████████⁰██████████████████████████████████████████████████████████████████|46
47|█████████████████⁰██████████████████████████████████████████████████████████████████|47
48|█████████████████⁰██████████████████████████████████████████████████████████████████|48
49|█████████████████⁰██████████████████████████████████████████████████████████████████|49
50|█████████████████⁰██████████████████████████████████████████████████████████████████|50
51|█████████████████⁰██████████████████████████████████████████████████████████████████|51
52|█████████████████⁰██████████████████████████████████████████████████████████████████|52
53|█████████████████⁰██████████████████████████████████████████████████████████████████|53
54|█████████████████⁰██████████████████████████████████████████████████████████████████|54
55|█████████████████⁰██████████████████████████████████████████████████████████████████|55
56|█████████████████⁰██████████████████████████████████████████████████████████████████|56
57|█████████████████⁰██████████████████████████████████████████████████████████████████|57
58|█████████████████⁰██████████████████████████████████████████████████████████████████|58
59|█████████████████⁰██████████████████████████████████████████████████████████████████|59
60|█████████████████⁰██████████████████████████████████████████████████████████████████|60
61|█████████████████⁰██████████████████████████████████████████████████████████████████|61
62|█████████████████⁰██████████████████████████████████████████████████████████████████|62
63|█████████████████⁰██████████████████████████████████████████████████████████████████|63
64|█████████████████⁰██████████████████╔════════╗██████████████████████████████████████|64
65|█████████████████⁰██████████████████║²²²²²²²²║██████████████████████████████████████|65
66|█████████████████⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰⁰2²²²²²²²²║██████████████████████████████████████|66
67|████████████████████████████████████║²@²²²²²²║██████████████████████████████████████|67
68|████████████████████████████████████║²²M²²²²²║██████████████████████████████████████|68
69|████████████████████████████████████║²²²²²²²M║██████████████████████████████████████|69
70|████████████████████████████████████║²²²²²²²²║██████████████████████████████████████|70
71|████████████████████████████████████║²²²²²²²²║██████████████████████████████████████|71
72|████████████████████████████████████║²²²²²²²²║██████████████████████████████████████|72
73|████████████████████████████████████╚════════╝██████████████████████████████████████|73
74|████████████████████████████████████████████████████████████████████████████████████|74
75|████████████████████████████████████████████████████████████████████████████████████|75
76|████████████████████████████████████████████████████████████████████████████████████|76
77|████████████████████████████████████████████████████████████████████████████████████|77
78|████████████████████████████████████████████████████████████████████████████████████|78
79|████████████████████████████████████████████████████████████████████████████████████|79
80|████████████████████████████████████████████████████████████████████████████████████|80
81|████████████████████████████████████████████████████████████████████████████████████|81
82|████████████████████████████████████████████████████████████████████████████████████|82
83|████████████████████████████████████████████████████████████████████████████████████|83
84|████████████████████████████████████████████████████████████████████████████████████|84
85|████████████████████████████████████████████████████████████████████████████████████|85
86|████████████████████████████████████████████████████████████████████████████████████|86
------------------------------------------------------------------------------------------
  |012345678901234567890123456789012345678901234567890123456789012345678901234567890123|  
";
            }
        }

        public static class LevelExpectedResults
        {
            public static IMazeExpectations GetExpectation(int level)
            {
                switch (level)
                {
                    case 1: return new Level1Expectations();
                    case 2: return new Level2Expectation();
                    case 3: return new Level3Expectations();
                }

                MazeTestHelpers.ThrowUnknownTest(level);
                return null;
            }
        }
    }
    public class LevelBuilderTests : LevelBuilderTestHelpers
    {
        public LevelBuilderTests(ITestOutputHelper output)
        : base(output)
        {
        }

        [Theory]
        [InlineData(1)]
        [InlineData(2)]
        [InlineData(3)]
        public void WhenBuiltDispatcher_ShouldHaveLevelCharacters(int levelNumber)
        {
            ArrangeTest();

            var level = Act();

            var expected = LevelBuilderExpectations.LevelExpectedResults.GetExpectation(levelNumber);
            AssertTest(level, expected);

            IGameLevel Act()
            {
                var newLevel = LevelBuilder.BuildNewGame(levelNumber);
                Dispatcher.Dispatch();
                return newLevel;
            }
        }
    }
}